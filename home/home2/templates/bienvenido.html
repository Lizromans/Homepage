{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Gesti√≥n del Conocimiento - Repositorio de Soluciones Tecnol√≥gicas del SENA. Plataforma colaborativa para gesti√≥n de proyectos de investigaci√≥n, recursos educativos y herramientas innovadoras.">
    <meta name="keywords" content="SENA, tecnolog√≠a, investigaci√≥n, innovaci√≥n, educaci√≥n, repositorio">
    <meta name="author" content="SENA - Gesti√≥n del Conocimiento">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Gesti√≥n del Conocimiento - Repositorio de Soluciones Tecnol√≥gicas">
    <meta property="og:description" content="Explora nuestro cat√°logo de herramientas innovadoras dise√±adas para transformar procesos y potenciar resultados.">
    <meta property="og:image" content="{% static 'img/og-image.jpg' %}">
    <meta property="og:url" content="https://innhub.sena.edu.co">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Gesti√≥n del Conocimiento - Repositorio de Soluciones Tecnol√≥gicas">
    <meta name="twitter:description" content="Explora nuestro cat√°logo de herramientas innovadoras del SENA.">
    
    <title>{% block titulo %}Gesti√≥n del Conocimiento - Repositorio de Soluciones Tecnol√≥gicas | SENA{% endblock %}</title>

    <!-- Preload critical resources -->
    <link rel="preload" href="{% static 'css/bienvenido.css' %}" as="style">
    <link rel="preload" href="{% static 'img/logo1.png' %}" as="image">
    
    <!-- Bootstrap CSS -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <!-- CSS personalizado -->
    <link rel="stylesheet" href="{% static 'css/bienvenido.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{% static 'img/favicon.png' %}">

    {% block css %}{% endblock %}
</head>
<body>

    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-to-main">Saltar al contenido principal</a>

    <!-- ===== HEADER ===== -->
    <header class="header-container" role="banner">
        <div class="header-content">
            <img src="{% static 'img/logo1.png' %}" 
                 alt="Logo SENA - Servicio Nacional de Aprendizaje" 
                 class="header-logo"
                 width="63"
                 height="63">
            <div class="header-divider" aria-hidden="true"></div>
            <div class="gc-logo-wrapper">
                <img src="{% static 'img/logo.png' %}" 
                    alt="Logo Gesti√≥n del Conocimiento" 
                    class="header-gc-logo"
                    width="75"
                    height="75">

                <!-- Imagen debajo -->
                <img src="{% static 'img/logo3.png' %}" 
                    alt="Imagen secundaria InnHub"
                    class="header-gc-sublogo">
            </div>
        </div>
        <nav class="header-menu" role="navigation" aria-label="Navegaci√≥n principal">
            <a href="#main-content" class="nav-link">Inicio</a>
            <a href="#soluciones" class="nav-link">Soluciones Tecnol√≥gicas</a>
            {% if request.session.catalogo_admin_id %}
                <a class="nav-link" href="{% url 'logout_catalogo' %}">
                    Cerrar Sesi√≥n
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                </a>
            {% else %}
                <!-- Dropdown de Login -->
                <div class="login-dropdown-container">
                    <button class="nav-link login-trigger" id="loginTrigger">
                        <span>Iniciar Sesi√≥n</span>
                        <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                            <path d="M6 9L1 4h10z"/>
                        </svg>
                    </button>
                    
                    <!-- Dropdown Menu -->
                    <div class="login-dropdown" id="loginDropdown">
                        <button class="close-dropdown" aria-label="Cerrar formulario">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </button>
                        <div class="dropdown-header">
                            <h3>Bienvenido</h3>
                            <p>Accede al panel de administraci√≥n</p>
                        </div>
                        
                        <form method="post" action="{% url 'login_catalogo' %}" class="login-form">
                            {% csrf_token %}
                            
                            <div class="form-group">
                                <label for="username">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="12" cy="7" r="4"></circle>
                                    </svg>
                                    Usuario
                                </label>
                                <input type="text" id="username" name="username" required placeholder="Ingresa tu usuario">
                            </div>
                            
                            <div class="form-group">
                                <label for="password">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                    </svg>
                                    Contrase√±a
                                </label>
                                <input type="password" id="password" name="password" required placeholder="Ingresa tu contrase√±a">
                                <span class="edit-icon" title="Mostrar contrase√±a">
                                    <i class="fa fa-eye"></i>
                                </span>
                            </div>
                            
                            <button type="submit" class="login-submit-btn">
                                Iniciar Sesi√≥n
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M5 12h14M12 5l7 7-7 7"/>
                                </svg>
                            </button>
                        </form>
                    </div>
                </div>
            {% endif %}
        </nav>
        <!-- Mobile menu button -->
        <button class="mobile-menu-toggle" aria-label="Abrir men√∫ de navegaci√≥n" aria-expanded="false">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
        </button>
    </header>

    <!-- Mobile Navigation Menu -->
    <nav class="mobile-menu" role="navigation" aria-label="Men√∫ m√≥vil">
        <a href="#main-content" class="mobile-nav-link">Inicio</a>
        <a href="#soluciones" class="mobile-nav-link">Soluciones Tecnol√≥gicas</a>
        
        {% if request.session.catalogo_admin_id %}
            <a class="mobile-nav-link" href="{% url 'logout_catalogo' %}">
                Cerrar Sesi√≥n
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: inline-block; vertical-align: middle; margin-left: 8px;">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                    <polyline points="16 17 21 12 16 7"></polyline>
                    <line x1="21" y1="12" x2="9" y2="12"></line>
                </svg>
            </a>
        {% else %}
            <!-- Login Dropdown Mobile -->
            <div class="mobile-login-dropdown-container">
                <button class="mobile-nav-link mobile-login-trigger" id="mobileLoginTrigger">
                    <span>Iniciar Sesi√≥n</span>
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor" style="display: inline-block; vertical-align: middle; margin-left: 8px;">
                        <path d="M6 9L1 4h10z"/>
                    </svg>
                </button>
                
                <!-- Mobile Dropdown Menu -->
                <div class="mobile-login-dropdown" id="mobileLoginDropdown">
                    <button class="close-dropdown" id="closeMobileDropdown" aria-label="Cerrar formulario">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                    <div class="dropdown-header">
                        <h3>Iniciar Sesi√≥n</h3>
                        <p>Accede al panel de administraci√≥n</p>
                    </div>
                    
                    <form method="post" action="{% url 'login_catalogo' %}" class="login-form">
                        {% csrf_token %}
                        
                        <div class="form-group">
                            <label for="mobile-username">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="12" cy="7" r="4"></circle>
                                </svg>
                                Usuario
                            </label>
                            <input type="text" id="mobile-username" name="username" required placeholder="Ingresa tu usuario">
                        </div>
                        
                        <div class="form-group">
                            <label for="mobile-password">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                </svg>
                                Contrase√±a
                            </label>
                            <input type="password" id="mobile-password" name="password" required placeholder="Ingresa tu contrase√±a">
                            <span class="edit-icon" title="Mostrar contrase√±a">
                                <i class="fa fa-eye"></i>
                            </span>
                        </div>
                        
                        <button type="submit" class="login-submit-btn">
                            Iniciar Sesi√≥n
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M5 12h14M12 5l7 7-7 7"/>
                            </svg>
                        </button>
                    </form>
                </div>
            </div>
        {% endif %}
    </nav>

    <!-- ===== PART√çCULAS DE FONDO ===== -->
    <div class="bg-particles" aria-hidden="true">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <!-- ===== MAIN ===== -->
    <main id="main-content" role="main">
        <!-- ===== SECCI√ìN HERO / BIENVENIDA ===== -->
        <section class="container hero-section">
            <!-- Texto principal -->
            <div class="main-text">
                <h1>Repositorio de Soluciones Tecnol√≥gicas</h1>
                <p class="subtitle">
                    Explora nuestro cat√°logo de herramientas innovadoras dise√±adas
                    para transformar procesos y potenciar resultados.
                </p>
                <div class="cta-container">
                    <a href="#soluciones" class="cta-button cta-secondary">Explorar Soluciones</a>
                </div>
                
                <!-- Trust signals -->
                <div class="trust-signals">
                    <div class="trust-item">
                        <span class="trust-number" data-count="{{ total_soluciones }}">0</span>
                        <span class="trust-label">Soluciones Tecnol√≥gicas</span>
                    </div>
                    <div class="trust-item">
                        <span class="trust-number" data-count="33">0</span>
                        <span class="trust-label">Sedes Regionales</span>
                    </div>
                    <div class="trust-item">
                        <span class="trust-number" data-count="118">0</span>
                        <span class="trust-label">Centros de Formaci√≥n</span>
                    </div>
                </div>
            </div>

            <!-- Hub de conocimiento animado -->
            <div class="knowledge-hub">
                <div class="hub-container">
                    <!-- Icono central -->
                    <div class="central-icon">‚öõ</div>
                    
                    <!-- √ìrbitas -->
                    <div class="orbit orbit-1"></div>
                    <div class="orbit orbit-2"></div>
                    <div class="orbit orbit-3"></div>
                    
                    <!-- L√≠neas de conexi√≥n -->
                    <div class="connection-line line-1"></div>
                    <div class="connection-line line-2"></div>
                    <div class="connection-line line-3"></div>
                    <div class="connection-line line-4"></div>
                    
                    <!-- Nodos de conocimiento -->
                    <div class="knowledge-node node-1" title="Investigaci√≥n Cient√≠fica">üî¨</div>
                    <div class="knowledge-node node-2" title="An√°lisis de Datos">üìä</div>
                    <div class="knowledge-node node-3" title="Inteligencia Artificial">üß†</div>
                    <div class="knowledge-node node-4" title="Base de Conocimiento">üìö</div>
                    <div class="knowledge-node node-5" title="Objetivos y Metas">üéØ</div>
                    <div class="knowledge-node node-6" title="Innovaci√≥n">üí°</div>
                    <div class="knowledge-node node-7" title="Crecimiento">üìà</div>
                    <div class="knowledge-node node-8" title="Conexiones">üîó</div>
                </div>
            </div>
        </section>

        <!-- ===== SECCI√ìN SOLUCIONES TECNOL√ìGICAS ===== -->
        <section class="secondary-container" id="soluciones">
            <h2 class="section-title">Soluciones Tecnol√≥gicas</h2>
            <p class="section-subtitle">
                Explora nuestro cat√°logo de herramientas innovadoras dise√±adas
                para transformar procesos y potenciar resultados.
            </p>

            <!-- Search and Filter -->
            <div class="search-filter-container">
                <div class="search-box">
                    <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <circle cx="9" cy="9" r="6" stroke="currentColor" stroke-width="2"/>
                        <path d="M14 14L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <input type="search" 
                           id="search-solutions" 
                           placeholder="Buscar soluciones..."
                           aria-label="Buscar soluciones tecnol√≥gicas">
                </div>
                <div class="filter-buttons" role="group" aria-label="Filtrar soluciones">
                    <button class="filter-btn active" data-filter="all">Todas</button>
                    <button class="filter-btn" data-filter="investigacion">Investigaci√≥n</button>
                    <button class="filter-btn" data-filter="academico">Acad√©mico</button>
                    <button class="filter-btn" data-filter="innovacion">Innovaci√≥n</button>
                </div>
            </div>
            <div class="boton-container">
            <!-- Bot√≥n para agregar soluci√≥n (solo admin) -->
                {% if request.session.catalogo_admin_id %}
                    <button class="nav-link admin-add-btn" id="adminAddBtn" title="Agregar Soluci√≥n">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="8" x2="12" y2="16"></line>
                            <line x1="8" y1="12" x2="16" y2="12"></line>
                        </svg>
                        <span>Agregar Soluci√≥n</span>
                    </button>
                {% endif %}
            </div>

            <div class="card-container">
                <!-- ===== TARJETAS DIN√ÅMICAS DE LA BASE DE DATOS ===== -->
                {% for solucion in soluciones_paginadas %}
                <article class="info-card dynamic-card">
                    <div class="acciones-solucion">
                        {% if request.session.catalogo_admin_id %} 
                            <button type="button"
                                    class="btn-editar"
                                    data-tooltip="Editar"
                                    data-bs-toggle="modal"
                                    data-bs-target="#modalEditarSolucion{{ solucion.id }}">
                                <i class="fa fa-edit"></i>
                            </button>

                            <button type="button"
                                    class="btn-eliminar"
                                    data-tooltip="Eliminar"
                                    data-modal-target="modalEliminarSolucion{{ solucion.id }}">
                                <i class="fa fa-trash"></i>
                            </button>
                        {% endif %}
                    </div>
                    <!-- ===== CAMBIO PRINCIPAL: Mostrar icono basado en tipo ===== -->
                    <div class="card-icon">
                        {% if solucion.tipo_icono == 'imagen' and solucion.icono_imagen %}
                            <!-- Mostrar imagen PNG -->
                            <img src="{{ solucion.icono_imagen.url }}" 
                                 alt="Icono de {{ solucion.titulo }}" 
                                 class="card-icon-img">
                        {% else %}
                            <!-- Mostrar SVG din√°mico basado en icono_nombre -->
                            <svg viewBox="0 0 24 24" style="width: 55%; height: 55%;" fill="currentColor" stroke="none">
                                {% if solucion.icono_nombre == 'Chat' %}
                                    <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/>
                                {% elif solucion.icono_nombre == 'Tel√©fono' %}
                                    <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                                {% elif solucion.icono_nombre == 'Correo' %}
                                    <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                                {% elif solucion.icono_nombre == 'Notificaci√≥n' %}
                                    <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
                                {% elif solucion.icono_nombre == 'Anuncio' %}
                                    <path d="M18 11v2h4v-2h-4zm-2 7.61c3.21 1.51 5.21 2.44 6.39 2.99v-2.21c-1.17-.54-3.17-1.46-6.39-2.98.01.7.0 1.4 0 2.2zM20.4 5.6c-1.18.55-3.18 1.48-6.4 3v2c3.22 1.51 5.22 2.44 6.4 2.99V5.6zM4 9c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h1v4h2v-4h1l5 3V6L8 9H4zm11.5 3c0-1.33-.58-2.53-1.5-3.35v6.69c.92-.81 1.5-2.01 1.5-3.34z"/>
                                {% elif solucion.icono_nombre == 'Ubicaci√≥n' %}
                                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                                {% elif solucion.icono_nombre == 'Mapa' %}
                                    <path d="M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"/>
                                {% elif solucion.icono_nombre == 'Casa' %}
                                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                                {% elif solucion.icono_nombre == 'Edificio' %}
                                    <path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"/>
                                {% elif solucion.icono_nombre == 'Reloj' %}
                                    <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                                {% elif solucion.icono_nombre == 'Calendario' %}
                                    <path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"/>
                                {% elif solucion.icono_nombre == 'Alarma' %}
                                    <path d="M0 3v2h2v14H0v2h24v-2h-2V5h2V3h-24zM5 5h14v14H5V5zm7 2c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm-.5 2h1v4.25l3.25 1.94-.5.87L12 14.5V7h-.5z"/>
                                {% elif solucion.icono_nombre == 'Engranaje' %}
                                    <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.488.488 0 00-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96a.488.488 0 00-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6A3.61 3.61 0 018.4 12 3.61 3.61 0 0112 8.4a3.61 3.61 0 013.6 3.6 3.61 3.61 0 01-3.6 3.6z"/>
                                {% elif solucion.icono_nombre == 'Herramienta' %}
                                    <path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83-3.21-3.21C11.33.49 10 .36 9.44 1 7.87 2.58 6.27 5.67 8.21 7.62l-1.76 1.77c-.63-.07-2.04.09-3.45 1.5-1.41 1.41-1.25 2.82-1.18 3.45.07.63.81 4.08-2.8 7.56-.34.34-.42.96.13 1.39.37.3.82.44 1.22.44.43 0 .84-.17 1.15-.49 3.48-3.61 4.89-4.83 5.81-3.92 1.41 1.41 1.24 2.82 1.17 3.45 1.44 1.44 3.71 2.26 5.82 2.26 1.65 0 3.08-.52 4.17-1.61 1.95-1.95 1.44-4.62 1.39-5.5 1.95-1.95 1.95-4.98-.01-6.94l1.83-1.84z"/>
                                {% elif solucion.icono_nombre == 'Bombilla' %}
                                    <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C7.48 2 3 6.48 3 12c0 3.85 2.25 7.13 5.45 8.7.27.14.55.3.55.58v.02c0 .28-.23.5-.5.5h.3c.41.12.7.5.7.92V23h4v-.78c0-.42.29-.8.7-.92h.3c-.27 0-.5-.22-.5-.5v-.02c0-.28.28-.44.55-.58C18.75 19.13 21 15.85 21 12c0-5.52-4.48-10-10-10z"/>
                                {% elif solucion.icono_nombre == 'C√≥digo' %}
                                    <path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
                                {% elif solucion.icono_nombre == 'Terminal' %}
                                    <path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm-9 11l-4-4 4-4v8zm2 0v-8l4 4-4 4z"/>
                                {% elif solucion.icono_nombre == 'Base de datos' %}
                                    <path d="M12 3c-4.42 0-8 1.79-8 4v2c0 2.21 3.58 4 8 4s8-1.79 8-4V7c0-2.21-3.58-4-8-4zm0 12c-4.42 0-8-1.79-8-4v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4zm0-6c-4.42 0-8-1.79-8-4v3c0 2.21 3.58 4 8 4s8-1.79 8-4V5c0 2.21-3.58 4-8 4z"/>
                                {% elif solucion.icono_nombre == 'Gr√°fica' %}
                                    <path d="M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"/>
                                {% elif solucion.icono_nombre == 'Dinero' %}
                                    <path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/>
                                {% elif solucion.icono_nombre == 'Malet√≠n' %}
                                    <path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"/>
                                {% elif solucion.icono_nombre == 'Documento' %}
                                    <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
                                {% elif solucion.icono_nombre == 'Carpeta' %}
                                    <path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"/>
                                {% elif solucion.icono_nombre == 'Nube' %}
                                    <path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"/>
                                {% elif solucion.icono_nombre == 'Descargar' %}
                                    <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                                {% elif solucion.icono_nombre == 'Libro' %}
                                    <path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/>
                                {% elif solucion.icono_nombre == 'Diploma' %}
                                    <path d="M20 3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h4l4 3 4-3h4c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 13H5V6h14v10z"/>
                                {% elif solucion.icono_nombre == 'Graduaci√≥n' %}
                                    <path d="M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z"/>
                                {% elif solucion.icono_nombre == 'L√°piz' %}
                                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                                {% elif solucion.icono_nombre == 'Estrella' %}
                                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                                {% elif solucion.icono_nombre == 'Coraz√≥n' %}
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                {% elif solucion.icono_nombre == 'Usuario' %}
                                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                {% elif solucion.icono_nombre == 'Buscar' %}
                                    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                                {% elif solucion.icono_nombre == 'Candado' %}
                                    <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                                {% else %}
                                    <!-- Icono por defecto: Estrella -->
                                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                                {% endif %}
                            </svg>
                        {% endif %}
                    </div>
                    <h3>{{ solucion.titulo }}</h3>
                    <p class="card-description">
                        {{ solucion.descripcion }}
                    </p>
                    <div class="card-footer">
                        <span class="card-tag">{{ solucion.get_categoria_display }}</span>
                        <button class="card-link-btn" aria-label="Abrir {{ solucion.titulo }}"
                            data-url="{{ solucion.url }}">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </button>
                    </div>
                </article>
                {% endfor %}
            </div>

            <!-- No results message -->
            <div class="no-results" style="display: none;">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                    <path d="M8 8l8 8M16 8l-8 8" stroke="currentColor" stroke-width="2"/>
                </svg>
                <p>No se encontraron soluciones que coincidan con tu b√∫squeda.</p>
            </div>
            
            <!-- ===== PAGINACI√ìN ===== -->
            {% if soluciones_paginadas.has_other_pages %}
            <nav aria-label="Page navigation example" class="mt-4">
                    <ul class="pagination justify-content-center">

                        <!-- Previous -->
                        <li class="page-item {% if not soluciones_paginadas.has_previous %}disabled{% endif %}">
                            <a class="page-link"
                            href="{% if soluciones_paginadas.has_previous %}
                                        ?page={{ soluciones_paginadas.previous_page_number }}#soluciones
                                    {% else %}
                                        #soluciones
                                    {% endif %}"
                            aria-label="Previous">
                                &lt;
                            </a>
                        </li>

                        <!-- N√∫meros -->
                        {% for num in soluciones_paginadas.paginator.page_range %}
                            <li class="page-item {% if soluciones_paginadas.number == num %}active{% endif %}">
                                <a class="page-link"
                                href="?page={{ num }}#soluciones">
                                    {{ num }}
                                </a>
                            </li>
                        {% endfor %}

                        <!-- Next -->
                        <li class="page-item {% if not soluciones_paginadas.has_next %}disabled{% endif %}">
                            <a class="page-link"
                            href="{% if soluciones_paginadas.has_next %}
                                        ?page={{ soluciones_paginadas.next_page_number }}#soluciones
                                    {% else %}
                                        #soluciones
                                    {% endif %}"
                            aria-label="Next">
                                &gt;
                            </a>
                        </li>

                    </ul>
                </nav>
            {% endif %}
        </section>


    </main>

<!-- Modal para Agregar Soluci√≥n (Solo Admin) -->
{% if request.session.catalogo_admin_id %}
<div class="admin-modal" id="adminModal">
    <div class="admin-modal-content">
        <div class="admin-modal-header">
            <h2>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 5v14M5 12h14"/>
                </svg>
                Agregar Nueva Soluci√≥ns
            </h2>
            <button class="admin-modal-close" id="closeModalBtn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>
        
        <form id="addSolutionForm" enctype="multipart/form-data" class="admin-modal-form">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="solutionTitle">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 20h9M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                    </svg>
                    T√≠tulo de la Soluci√≥n
                </label>
                <input type="text" id="solutionTitle" required maxlength="200" placeholder="Ej: Sistema de Gesti√≥n de Proyectos">
            </div>

            <div class="form-group">
                <label for="solutionDescription">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                    </svg>
                    Descripci√≥n
                </label>
                <textarea id="solutionDescription" required rows="3" placeholder="Describe brevemente la soluci√≥n tecnol√≥gica..."></textarea>
            </div>

            <div class="form-group">
                <label for="solutionCategory">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 3h7v7H3zM14 3h7v7h-7zM14 14h7v7h-7zM3 14h7v7H3z"/>
                    </svg>
                    Categor√≠a
                </label>
                <select id="solutionCategory" required>
                    <option value="">Selecciona una categor√≠a</option>
                    <option value="innovacion">Innovaci√≥n</option>
                    <option value="investigacion">Investigaci√≥n</option>
                    <option value="academico">Acad√©mico</option>
                </select>
            </div>

            <div class="form-group">
                <label for="solutionUrl">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                    </svg>
                    URL de Acceso
                </label>
                <input type="url" id="solutionUrl" required maxlength="200" placeholder="https://ejemplo.com">
            </div>

            <!-- ===== CAMBIO: Agregar name="icono_nombre" al input ===== -->
            <div class="form-group">
                <label>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <circle cx="8.5" cy="8.5" r="1.5"></circle>
                        <polyline points="21 15 16 10 5 21"></polyline>
                    </svg>
                    Tipo de Representaci√≥n
                </label>
                <div class="radio-group">
                    <label class="radio-option">
                        <input type="radio" name="imageType" value="icon" id="radioIcon" checked>
                        <span>Icono SVG</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="imageType" value="image" id="radioImage">
                        <span>Imagen PNG</span>
                    </label>
                </div>
            </div>

            <!-- Secci√≥n de Icono SVG -->
            <div class="form-group" id="iconSection">
                <label>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                    </svg>
                    Seleccionar Icono
                </label>

                <div class="input-row">
                    <!-- live preview -->
                    <div class="icon-preview" id="iconPreview">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" fill="none" opacity=".35"/>
                            <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <!-- ===== AGREGAR name="icono_nombre" ===== -->
                    <input type="text" id="solutionIcon" name="icono_nombre" placeholder="Buscar o escribir icono‚Ä¶" readonly />
                    <button type="button" class="btn-catalog" id="btnOpen" title="Abrir cat√°logo">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
                            <rect x="3" y="3" width="7" height="7" rx="1"></rect>
                            <rect x="14" y="3" width="7" height="7" rx="1"></rect>
                            <rect x="3" y="14" width="7" height="7" rx="1"></rect>
                            <rect x="14" y="14" width="7" height="7" rx="1"></rect>
                        </svg>
                    </button>
                </div>

                <!-- ‚îÄ‚îÄ‚îÄ Popup ‚îÄ‚îÄ‚îÄ -->
                <div class="catalog-popup" id="catalogPopup">
                    <div class="catalog-header">
                        <span>Cat√°logo de Iconos</span>
                        <button type="button" class="close-btn" id="btnClose">√ó</button>
                    </div>

                    <div class="catalog-search">
                        <input type="text" id="searchInput" placeholder="üîç Buscar icono‚Ä¶" />
                    </div>

                    <div class="catalog-tabs" id="catalogTabs">
                        <!-- filled by JS -->
                    </div>

                    <div class="catalog-grid" id="catalogGrid">
                        <!-- filled by JS -->
                    </div>
                </div>
            </div>

            <!-- Secci√≥n de Imagen PNG -->
            <div class="form-group" id="imageSection" style="display: none;">
                <label for="solutionImage">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <circle cx="8.5" cy="8.5" r="1.5"></circle>
                        <polyline points="21 15 16 10 5 21"></polyline>
                    </svg>
                    Subir Imagen PNG
                </label>
                
                <div class="image-upload-area">
                    <input type="file" id="solutionImage" accept=".png,image/png" style="display: none;">
                    <div class="upload-box" id="uploadBox">
                        <div class="upload-content">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" y1="3" x2="12" y2="15"></line>
                            </svg>
                            <p class="upload-text">Haz clic o arrastra tu imagen PNG aqu√≠</p>
                            <p class="upload-hint">Tama√±o recomendado: 512x512px ‚Ä¢ M√°ximo: 2MB</p>
                        </div>
                        <div class="image-preview-container" id="imagePreviewContainer" style="display: none;">
                            <img id="imagePreview" src="" alt="Vista previa">
                            <button type="button" class="remove-image-btn" id="removeImageBtn">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"></line>
                                    <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <input type="hidden" id="imageFileName" name="imageFileName">
                </div>
            </div>

            <div class="form-actions">
                <button type="button" class="btn-cancel" id="cancelBtn">
                    Cancelar
                </button>
                <button type="submit" class="btn-submit">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                    Agregar Soluci√≥n
                </button>
            </div>
        </form>
    </div>
</div>
{% endif %}

{% for solucion in soluciones_paginadas %}
    {% if request.session.catalogo_admin_id %}

    <div class="modal-overlay-evento" id="modalEditarSolucion{{ solucion.id }}">
        <div class="modal-dialog-evento">

            <a href="{% url 'bienvenido' %}" class="modal-cerrar-evento">&times;</a>

            <div class="modal-header-evento">
                <h5>Editar Soluci√≥n</h5>
            </div>

            <div class="modal-body-evento">
                <form method="POST"
                    action="{% url 'editar_solucion' solucion.id %}"
                    enctype="multipart/form-data"
                    id="editSolutionForm{{ solucion.id }}">
                    {% csrf_token %}

                    <div class="row-evento">

                        <!-- T√çTULO -->
                        <div class="col-evento col-evento-full">
                            <label>T√≠tulo de la Soluci√≥n</label>
                            <input type="text" name="titulo"
                                value="{{ solucion.titulo }}"
                                maxlength="200" required>
                        </div>

                        <!-- DESCRIPCI√ìN -->
                        <div class="col-evento col-evento-full">
                            <label>Descripci√≥n</label>
                            <textarea name="descripcion" rows="3" maxlength="250" required>{{ solucion.descripcion }}</textarea>
                        </div>

                        <!-- CATEGOR√çA -->
                        <div class="col-evento">
                            <label>Categor√≠a</label>
                            <select name="categoria" required>
                                <option value="">Selecciona una categor√≠a</option>
                                <option value="innovacion" {% if solucion.categoria == "innovacion" %}selected{% endif %}>Innovaci√≥n</option>
                                <option value="investigacion" {% if solucion.categoria == "investigacion" %}selected{% endif %}>Investigaci√≥n</option>
                                <option value="academico" {% if solucion.categoria == "academico" %}selected{% endif %}>Acad√©mico</option>
                            </select>
                        </div>

                        <!-- URL -->
                        <div class="col-evento col-evento-full">
                            <label>URL de Acceso</label>
                            <input type="url" name="url"
                                value="{{ solucion.url }}"
                                maxlength="200" required>
                        </div>

                        <!-- TIPO REPRESENTACI√ìN -->
                        <div class="col-evento col-evento-full">
                            <label>Tipo de Representaci√≥n</label>

                            <div class="radio-group">
                                <label class="radio-option">
                                    <input type="radio"
                                        name="editImageType"
                                        value="icon"
                                        {% if solucion.icono_nombre %}checked{% endif %}>
                                    <span>Icono SVG</span>
                                </label>

                                <label class="radio-option">
                                    <input type="radio"
                                        name="editImageType"
                                        value="image"
                                        {% if solucion.icono_imagen %}checked{% endif %}>
                                    <span>Imagen PNG</span>
                                </label>
                            </div>
                        </div>

                        <!-- ===== ICONO SVG ===== -->
                        <div class="col-evento col-evento-full editIconSection"
                            style="{% if not solucion.icono_nombre %}display:none;{% endif %}">
                            <label>Nombre del Icono</label>
                            <input type="text"
                                name="icono_nombre"
                                id="editSolutionIcon{{ solucion.id }}"
                                value="{{ solucion.icono_nombre|default:'' }}"
                                maxlength="100">

                            {% if solucion.icono_nombre %}
                            <small style="color:#666;">Icono actual: {{ solucion.icono_nombre }}</small>
                            {% endif %}
                        </div>

                        <!-- ===== IMAGEN PNG ===== -->
                        <div class="col-evento col-evento-full editImageSection">
                            <label>Imagen PNG actual</label>

                            {% if solucion.icono_imagen %}
                            <div style="margin-bottom:10px;">
                                <img src="{{ solucion.icono_imagen.url }}">
                            </div>
                            {% endif %}

                            <label>Cambiar Imagen</label>
                            <input type="file"
                                name="icono_imagen"
                                id="editSolutionImage{{ solucion.id }}"
                                accept="image/png">
                        </div>

                    </div>

                    <div class="modal-footer-evento">
                        <a href="{% url 'bienvenido' %}" class="btn-evento btn-evento-secondary">Cancelar</a>
                        <button type="submit" class="btn-evento btn-evento-primary">Guardar Cambios</button>
                    </div>

                </form>
            </div>
        </div>
    </div>
    {% endif %}

    {% if request.session.catalogo_admin_id %}
    <div class="modal-delete-overlay"
        id="modalEliminarSolucion{{ solucion.id }}"
        tabindex="-1"
        aria-hidden="true">
        
        <div class="modal-delete-dialog">
            <div class="modal-delete-content">

                <!-- Header -->
                <div class="modal-delete-header">
                    <h5 class="modal-delete-title">
                        Confirmar eliminaci√≥n
                    </h5>
                    <button type="button"
                            class="btn-close"
                            class="modal-delete-close"></button>
                </div>

                <!-- Body -->
                <div class="modal-delete-body">
                    <p class="mb-2">
                        ¬øEst√°s seguro de que deseas eliminar esta soluci√≥n?
                    </p>
                    <strong class="text">
                        Esta acci√≥n no se puede deshacer.
                    </strong>
                </div>

                <!-- Footer -->
                <div class="modal-delete-footer">
                    <button type="button"
                            class="btn"
                            class="modal-delete-close">
                        Cancelar
                    </button>

                    <form method="POST"
                        action="{% url 'eliminar_solucion' solucion.id %}">
                        {% csrf_token %}
                        <button type="submit"
                                class="btn-eliminar ">
                            <i class="fa fa-trash"></i>
                            Eliminar
                        </button>
                    </form>
                </div>

            </div>
        </div>
    </div>
    {% endif %}
{% endfor %}

    <!-- Scroll to top button -->
    <button class="scroll-to-top" aria-label="Volver arriba" title="Volver arriba">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M12 19V5M5 12l7-7 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
    </button>

    <!-- ===== FOOTER ===== -->
    <footer role="contentinfo">
        <div class="footer-content">
            <div class="footer-section">
                <h4>Gesti√≥n del Conocimiento</h4>
                <p>Repositorio de Soluciones Tecnol√≥gicas del SENA</p>
            </div>
            <div class="footer-section">
                <h4>Enlaces R√°pidos</h4>
                <ul>
                    <li><a href="#main-content">Inicio</a></li>
                    <li><a href="#soluciones">Soluciones</a></li>
                    <li><a id="footerLoginLink">Iniciar Sesi√≥n</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Contacto</h4>
                <p>Centro de Gesti√≥n del Conocimiento</p>
                <p>SENA - Antioquia, Colombia</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 SENA - Gesti√≥n del Conocimiento. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- JS de Bootstrap y dependencias -->
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/mensajes.js' %}"></script>
    <script src="{% static 'js/contrase√±a.js' %}"></script>
    <!-- Mensajes de alerta -->
    {% if messages %}
    <script>
        {% for message in messages %}
            mostrarMensajeExito("{{ message|escapejs }}", "{{ message.tags }}");
        {% endfor %}
    </script>
    {% endif %}
<script>
/**
 * ============================================================================
 * INNHUB - GESTI√ìN DEL CONOCIMIENTO
 * Sistema de Administraci√≥n de Soluciones Tecnol√≥gicas
 * ============================================================================
 */

(function() {
    'use strict';

    console.log('üöÄ Iniciando InnHub - Gesti√≥n del Conocimiento...');

    // ========================================================================
    // CONFIGURACI√ìN Y CONSTANTES
    // ========================================================================
    
    const CONFIG = {
        MAX_IMAGE_SIZE: 2 * 1024 * 1024, // 2MB
        SCROLL_THRESHOLD: 300,
        ANIMATION_DURATION: 2000,
        LOGIN_SCROLL_DELAY: 500
    };

    // ========================================================================
    // CAT√ÅLOGO DE ICONOS SVG
    // ========================================================================
    
    const ICONS_CATALOG = [
        // Comunicaci√≥n
        { name:"Chat",        cat:"Comunicaci√≥n",  paths:[{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z", fill:true}] },
        { name:"Tel√©fono",    cat:"Comunicaci√≥n",  paths:[{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z", fill:true}] },
        { name:"Correo",      cat:"Comunicaci√≥n",  paths:[{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z", fill:true}] },
        { name:"Notificaci√≥n",cat:"Comunicaci√≥n",  paths:[{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z", fill:true}] },
        { name:"Anuncio",     cat:"Comunicaci√≥n",  paths:[{d:"M18 11v2h4v-2h-4zm-2 7.61c3.21 1.51 5.21 2.44 6.39 2.99v-2.21c-1.17-.54-3.17-1.46-6.39-2.98.01.7.0 1.4 0 2.2zM20.4 5.6c-1.18.55-3.18 1.48-6.4 3v2c3.22 1.51 5.22 2.44 6.4 2.99V5.6zM4 9c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h1v4h2v-4h1l5 3V6L8 9H4zm11.5 3c0-1.33-.58-2.53-1.5-3.35v6.69c.92-.81 1.5-2.01 1.5-3.34z", fill:true}] },
        
        // Ubicaci√≥n
        { name:"Ubicaci√≥n",   cat:"Ubicaci√≥n",     paths:[{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z", fill:true}] },
        { name:"Mapa",        cat:"Ubicaci√≥n",     paths:[{d:"M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z", fill:true}] },
        { name:"Casa",        cat:"Ubicaci√≥n",     paths:[{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z", fill:true}] },
        { name:"Edificio",    cat:"Ubicaci√≥n",     paths:[{d:"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z", fill:true}] },
        
        // Tiempo
        { name:"Reloj",       cat:"Tiempo",        paths:[{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z", fill:true}] },
        { name:"Calendario",  cat:"Tiempo",        paths:[{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z", fill:true}] },
        { name:"Alarma",      cat:"Tiempo",        paths:[{d:"M0 3v2h2v14H0v2h24v-2h-2V5h2V3h-24zM5 5h14v14H5V5zm7 2c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm-.5 2h1v4.25l3.25 1.94-.5.87L12 14.5V7h-.5z", fill:true}] },
        
        // Herramientas
        { name:"Engranaje",   cat:"Herramientas",  paths:[{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.488.488 0 00-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96a.488.488 0 00-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6A3.61 3.61 0 018.4 12 3.61 3.61 0 0112 8.4a3.61 3.61 0 013.6 3.6 3.61 3.61 0 01-3.6 3.6z", fill:true}] },
        { name:"Herramienta",  cat:"Herramientas", paths:[{d:"M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83-3.21-3.21C11.33.49 10 .36 9.44 1 7.87 2.58 6.27 5.67 8.21 7.62l-1.76 1.77c-.63-.07-2.04.09-3.45 1.5-1.41 1.41-1.25 2.82-1.18 3.45.07.63.81 4.08-2.8 7.56-.34.34-.42.96.13 1.39.37.3.82.44 1.22.44.43 0 .84-.17 1.15-.49 3.48-3.61 4.89-4.83 5.81-3.92 1.41 1.41 1.24 2.82 1.17 3.45 1.44 1.44 3.71 2.26 5.82 2.26 1.65 0 3.08-.52 4.17-1.61 1.95-1.95 1.44-4.62 1.39-5.5 1.95-1.95 1.95-4.98-.01-6.94l1.83-1.84z", fill:true}] },
        { name:"Bombilla",    cat:"Herramientas",  paths:[{d:"M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C7.48 2 3 6.48 3 12c0 3.85 2.25 7.13 5.45 8.7.27.14.55.3.55.58v.02c0 .28-.23.5-.5.5h.3c.41.12.7.5.7.92V23h4v-.78c0-.42.29-.8.7-.92h.3c-.27 0-.5-.22-.5-.5v-.02c0-.28.28-.44.55-.58C18.75 19.13 21 15.85 21 12c0-5.52-4.48-10-10-10z", fill:true}] },
        
        // Desarrollo
        { name:"C√≥digo",      cat:"Desarrollo",    paths:[{d:"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z", fill:true}] },
        { name:"Terminal",    cat:"Desarrollo",    paths:[{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm-9 11l-4-4 4-4v8zm2 0v-8l4 4-4 4z", fill:true}] },
        { name:"Base de datos",cat:"Desarrollo",   paths:[{d:"M12 3c-4.42 0-8 1.79-8 4v2c0 2.21 3.58 4 8 4s8-1.79 8-4V7c0-2.21-3.58-4-8-4zm0 12c-4.42 0-8-1.79-8-4v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4zm0-6c-4.42 0-8-1.79-8-4v3c0 2.21 3.58 4 8 4s8-1.79 8-4V5c0 2.21-3.58 4-8 4z", fill:true}] },
        
        // Negocios
        { name:"Gr√°fica",     cat:"Negocios",      paths:[{d:"M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z", fill:true}] },
        { name:"Dinero",      cat:"Negocios",      paths:[{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z", fill:true}] },
        { name:"Malet√≠n",     cat:"Negocios",      paths:[{d:"M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z", fill:true}] },
        
        // Archivos
        { name:"Documento",   cat:"Archivos",      paths:[{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z", fill:true}] },
        { name:"Carpeta",     cat:"Archivos",      paths:[{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z", fill:true}] },
        { name:"Nube",        cat:"Archivos",      paths:[{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z", fill:true}] },
        { name:"Descargar",   cat:"Archivos",      paths:[{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z", fill:true}] },
        
        // Educaci√≥n
        { name:"Libro",       cat:"Educaci√≥n",     paths:[{d:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z", fill:true}] },
        { name:"Diploma",     cat:"Educaci√≥n",     paths:[{d:"M20 3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h4l4 3 4-3h4c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 13H5V6h14v10z", fill:true}] },
        { name:"Graduaci√≥n",  cat:"Educaci√≥n",     paths:[{d:"M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z", fill:true}] },
        { name:"L√°piz",       cat:"Educaci√≥n",     paths:[{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z", fill:true}] },
        
        // Otros
        { name:"Estrella",    cat:"Otros",         paths:[{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z", fill:true}] },
        { name:"Coraz√≥n",     cat:"Otros",         paths:[{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z", fill:true}] },
        { name:"Usuario",     cat:"Otros",         paths:[{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z", fill:true}] },
        { name:"Buscar",      cat:"Otros",         paths:[{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z", fill:true}] },
        { name:"Candado",     cat:"Otros",         paths:[{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z", fill:true}] }
    ];

    console.log(`üìö ${ICONS_CATALOG.length} √≠conos cargados`);

    const categories = ["Todas", ...new Set(ICONS_CATALOG.map(ic => ic.cat))];
    let activeCategory = "Todas";
    let searchText = "";
    let selectedIcon = null;

    // ========================================================================
    // INICIALIZACI√ìN PRINCIPAL
    // ========================================================================
    
    function init() {
        console.log('üîÑ Inicializando m√≥dulos...');
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initAllModules);
        } else {
            initAllModules();
        }
    }

    function initAllModules() {
        // PRIMERO: Cerrar todos los modales que puedan estar abiertos
        forceCloseAllModalsOnLoad();
        
        // M√≥dulos principales
        initAdminModal();
        initIconCatalog();
        initImageUpload();
        initImageTypeToggle();
        
        // √öLTIMO: Configurar modales con delay para asegurar que Bootstrap est√© listo
        setTimeout(initModalsCorrectly, 100);
        
        console.log('‚úÖ Todos los m√≥dulos inicializados');
    }

    // ========================================================================
    // M√ìDULO: CERRAR MODALES AL CARGAR
    // ========================================================================
    
    function forceCloseAllModalsOnLoad() {
        console.log('üîí Cerrando todos los modales al cargar...');
        
        // Cerrar modales de Bootstrap
        const bootstrapModals = document.querySelectorAll('.modal');
        bootstrapModals.forEach(modal => {
            modal.classList.remove('show');
            modal.style.display = 'none';
            modal.setAttribute('aria-hidden', 'true');
            modal.removeAttribute('aria-modal');
        });
        
        // Cerrar modales personalizados
        const customModals = document.querySelectorAll('.modal-overlay-evento');
        customModals.forEach(modal => {
            modal.style.display = 'none';
            modal.classList.remove('show');
        });
        
        // Limpiar backdrops
        const backdrops = document.querySelectorAll('.modal-backdrop');
        backdrops.forEach(backdrop => backdrop.remove());
        
        // Restaurar body
        document.body.classList.remove('modal-open');
        document.body.style.overflow = '';
        document.body.style.paddingRight = '';
        
        console.log('‚úÖ Todos los modales cerrados');
    }

    // ========================================================================
    // M√ìDULO: CONFIGURACI√ìN CORRECTA DE MODALES
    // ========================================================================
    
    function initModalsCorrectly() {
        console.log('üé≠ Inicializando sistema de modales...');
        
        // Verificar que Bootstrap est√© cargado
        if (typeof bootstrap === 'undefined') {
            console.warn('‚ö†Ô∏è Bootstrap no est√° cargado');
            return;
        }
        
        // Configurar botones de ELIMINAR (Bootstrap modals)
        configureDeleteButtons();
        
        // Configurar botones de EDITAR (modales personalizados)
        configureEditButtons();
        
        console.log('‚úÖ Sistema de modales configurado correctamente');
    }

    function configureDeleteButtons() {
        const deleteButtons = document.querySelectorAll('.btn-eliminar[data-bs-toggle="modal"]');
        
        console.log(`üóëÔ∏è Configurando ${deleteButtons.length} botones de eliminar`);
        
        deleteButtons.forEach(button => {
            const targetId = button.getAttribute('data-bs-target');
            
            if (!targetId) {
                console.warn('‚ö†Ô∏è Bot√≥n sin data-bs-target');
                return;
            }
            
            const targetModal = document.querySelector(targetId);
            
            if (!targetModal) {
                console.warn(`‚ö†Ô∏è Modal no encontrado: ${targetId}`);
                return;
            }
            
            // IMPORTANTE: NO remover los atributos data-bs-*
            // Dejar que Bootstrap los maneje naturalmente
            
            console.log(`‚úÖ Bot√≥n de eliminar configurado: ${targetId}`);
        });
    }

    function configureEditButtons() {
        const editButtons = document.querySelectorAll('.btn-editar[data-bs-toggle="modal"]');
        
        console.log(`‚úèÔ∏è Configurando ${editButtons.length} botones de editar`);
        
        editButtons.forEach(button => {
            const targetId = button.getAttribute('data-bs-target');
            
            if (!targetId) {
                console.warn('‚ö†Ô∏è Bot√≥n sin data-bs-target');
                return;
            }
            
            const targetModal = document.querySelector(targetId);
            
            if (!targetModal) {
                console.warn(`‚ö†Ô∏è Modal no encontrado: ${targetId}`);
                return;
            }
            
            // Agregar event listener
            button.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                console.log(`üñ±Ô∏è Click en bot√≥n de editar ‚Üí ${targetId}`);
                
                // Abrir modal personalizado
                targetModal.style.display = 'flex';
                targetModal.classList.add('show');
                document.body.style.overflow = 'hidden';
                
                console.log('‚úÖ Modal de editar abierto');
            });
        });
        
        // Configurar botones de cerrar
        const closeButtons = document.querySelectorAll('.modal-cerrar-evento');
        
        closeButtons.forEach(closeBtn => {
            closeBtn.addEventListener('click', function(e) {
                e.preventDefault();
                
                const modal = this.closest('.modal-overlay-evento');
                
                if (modal) {
                    console.log('üö™ Cerrando modal personalizado');
                    modal.style.display = 'none';
                    modal.classList.remove('show');
                    document.body.style.overflow = '';
                }
            });
        });
        
        // Cerrar con click en overlay
        const modals = document.querySelectorAll('.modal-overlay-evento');
        
        modals.forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    console.log('üö™ Cerrando por click en overlay');
                    this.style.display = 'none';
                    this.classList.remove('show');
                    document.body.style.overflow = '';
                }
            });
        });
        
        // Cerrar con ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const openModal = document.querySelector('.modal-overlay-evento.show');
                if (openModal) {
                    console.log('üö™ Cerrando con ESC');
                    openModal.style.display = 'none';
                    openModal.classList.remove('show');
                    document.body.style.overflow = '';
                }
            }
        });
    }

    // ========================================================================
    // M√ìDULO: MODAL DE ADMINISTRACI√ìN
    // ========================================================================
    
    function initAdminModal() {
        const adminModal = document.getElementById('adminModal');
        const adminAddBtn = document.getElementById('adminAddBtn');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const adminSolutionForm = document.getElementById('addSolutionForm');

        if (!adminModal || !adminAddBtn || !adminSolutionForm) {
            console.log('‚ÑπÔ∏è Modal de administraci√≥n no disponible');
            return;
        }

        console.log('üîê Inicializando modal de administraci√≥n...');

        // Abrir modal
        adminAddBtn.addEventListener('click', () => {
            console.log('‚ú® Abriendo modal...');
            adminModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        // Cerrar modal
        function closeModal() {
            console.log('üö™ Cerrando modal...');
            adminModal.classList.remove('active');
            document.body.style.overflow = '';
            adminSolutionForm.reset();
            selectedIcon = null;
            
            const input = document.getElementById("solutionIcon");
            const preview = document.getElementById("iconPreview");
            const popup = document.getElementById("catalogPopup");
            
            if (input) input.value = '';
            if (preview) {
                preview.innerHTML = '<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" fill="none" opacity=".35"/><path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/></svg>';
            }
            if (popup) popup.classList.remove("open");
            
            clearImagePreview();
            
            const radioIcon = document.getElementById('radioIcon');
            const iconSection = document.getElementById('iconSection');
            const imageSection = document.getElementById('imageSection');
            
            if (radioIcon) radioIcon.checked = true;
            if (iconSection) iconSection.style.display = 'block';
            if (imageSection) imageSection.style.display = 'none';
        }

        if (closeModalBtn) closeModalBtn.addEventListener('click', closeModal);
        if (cancelBtn) cancelBtn.addEventListener('click', closeModal);

        adminModal.addEventListener('click', (e) => {
            if (e.target === adminModal) closeModal();
        });

        // Manejar env√≠o del formulario
        initFormSubmit(adminSolutionForm, closeModal);

        console.log('‚úÖ Modal de administraci√≥n inicializado');
    }

    // ========================================================================
    // M√ìDULO: ENV√çO DE FORMULARIO
    // ========================================================================
    
    function initFormSubmit(form, closeModalCallback) {
        if (!form) return;

        form.addEventListener('submit', async function(e) {
            e.preventDefault();

            const titulo = document.getElementById('solutionTitle').value.trim();
            const descripcion = document.getElementById('solutionDescription').value.trim();
            const categoria = document.getElementById('solutionCategory').value;
            const url = document.getElementById('solutionUrl').value.trim();
            const imageType = document.querySelector('input[name="imageType"]:checked')?.value || 'icon';
            
            if (!titulo || !descripcion || !categoria || !url) {
                alert('‚ùå Por favor completa todos los campos obligatorios');
                return;
            }

            const formData = new FormData();
            formData.append('titulo', titulo);
            formData.append('descripcion', descripcion);
            formData.append('categoria', categoria);
            formData.append('url', url);
            formData.append('tipo_imagen', imageType);

            if (imageType === 'icon') {
                const iconoNombre = document.getElementById('solutionIcon').value.trim();
                if (!iconoNombre) {
                    alert('‚ùå Por favor selecciona un icono');
                    return;
                }
                formData.append('icono_nombre', iconoNombre);
            } else {
                const imageFile = document.getElementById('solutionImage').files[0];
                if (!imageFile) {
                    alert('‚ùå Por favor selecciona una imagen PNG');
                    return;
                }
                formData.append('icono', imageFile);
            }

            try {
                const submitBtn = form.querySelector('button[type="submit"]');
                const originalButtonContent = submitBtn.innerHTML;
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="spinner"><circle cx="12" cy="12" r="10"></circle></svg> Agregando...';

                const response = await fetch('agregar-solucion/', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'X-CSRFToken': getCookie('csrftoken')
                    }
                });

                const data = await response.json();

                if (data.success) {
                    console.log('‚úÖ Soluci√≥n agregada exitosamente');
                    closeModalCallback();
                    window.location.reload();
                } else {
                    alert('‚ùå ' + (data.error || 'Error al agregar la soluci√≥n'));
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = originalButtonContent;
                }
            } catch (error) {
                console.error('‚ùå Error:', error);
                alert('‚ùå Error al agregar la soluci√≥n. Por favor intenta de nuevo.');
                const submitBtn = form.querySelector('button[type="submit"]');
                submitBtn.disabled = false;
            }
        });
    }

    // ========================================================================
    // M√ìDULO: CAT√ÅLOGO DE ICONOS
    // ========================================================================
    
    function initIconCatalog() {
        const popup = document.getElementById("catalogPopup");
        const grid = document.getElementById("catalogGrid");
        const tabs = document.getElementById("catalogTabs");
        const preview = document.getElementById("iconPreview");
        const input = document.getElementById("solutionIcon");
        const searchInp = document.getElementById("searchInput");
        const btnOpen = document.getElementById("btnOpen");
        const btnClose = document.getElementById("btnClose");

        if (!popup || !grid || !tabs || !preview || !input || !searchInp || !btnOpen || !btnClose) {
            console.log('‚ÑπÔ∏è Cat√°logo de √≠conos no disponible');
            return;
        }

        console.log('üé® Inicializando cat√°logo de √≠conos...');

        // Renderizar tabs
        function renderTabs() {
            tabs.innerHTML = "";
            categories.forEach(cat => {
                const btn = document.createElement("button");
                btn.textContent = cat;
                btn.className = cat === activeCategory ? "active" : "";
                btn.addEventListener("click", () => {
                    activeCategory = cat;
                    renderTabs();
                    renderGrid();
                });
                tabs.appendChild(btn);
            });
        }

        // Renderizar grid de iconos
        function renderGrid() {
            grid.innerHTML = "";
            const filtered = ICONS_CATALOG.filter(ic => {
                const matchCat = activeCategory === "Todas" || ic.cat === activeCategory;
                const matchSearch = !searchText || ic.name.toLowerCase().includes(searchText.toLowerCase());
                return matchCat && matchSearch;
            });

            if (filtered.length === 0) {
                grid.innerHTML = '<p style="grid-column: 1/-1; text-align:center; color:#999;">No se encontraron √≠conos</p>';
                return;
            }

            filtered.forEach(ic => {
                const item = document.createElement("div");
                item.className = "catalog-item";
                
                const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute("viewBox", "0 0 24 24");
                svg.setAttribute("width", "40");
                svg.setAttribute("height", "40");
                
                ic.paths.forEach(p => {
                    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    path.setAttribute("d", p.d);
                    if (p.fill) path.setAttribute("fill", "currentColor");
                    svg.appendChild(path);
                });

                const label = document.createElement("span");
                label.textContent = ic.name;

                item.appendChild(svg);
                item.appendChild(label);

                item.addEventListener("click", () => {
                    selectedIcon = ic;
                    input.value = ic.name;
                    updatePreview();
                    popup.classList.remove("open");
                });

                grid.appendChild(item);
            });
        }

        // Actualizar vista previa
        function updatePreview() {
            if (!selectedIcon) return;
            preview.innerHTML = "";
            
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.setAttribute("viewBox", "0 0 24 24");
            svg.setAttribute("width", "24");
            svg.setAttribute("height", "24");
            
            selectedIcon.paths.forEach(p => {
                const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                path.setAttribute("d", p.d);
                if (p.fill) path.setAttribute("fill", "currentColor");
                svg.appendChild(path);
            });
            
            preview.appendChild(svg);
        }

        // Eventos
        btnOpen.addEventListener("click", () => {
            popup.classList.add("open");
            renderTabs();
            renderGrid();
        });

        btnClose.addEventListener("click", () => {
            popup.classList.remove("open");
        });

        popup.addEventListener("click", (e) => {
            if (e.target === popup) popup.classList.remove("open");
        });

        searchInp.addEventListener("input", (e) => {
            searchText = e.target.value;
            renderGrid();
        });

        console.log('‚úÖ Cat√°logo de √≠conos inicializado');
    }

    // ========================================================================
    // M√ìDULO: CARGA DE IM√ÅGENES
    // ========================================================================
    
    function initImageUpload() {
        const fileInput = document.getElementById('solutionImage');
        const uploadBox = document.getElementById('uploadBox');
        const imagePreview = document.getElementById('imagePreview');
        const imagePreviewContainer = document.getElementById('imagePreviewContainer');
        const removeImageBtn = document.getElementById('removeImageBtn');

        if (!fileInput || !uploadBox) {
            console.log('‚ÑπÔ∏è Sistema de carga de im√°genes no disponible');
            return;
        }

        console.log('üì§ Inicializando carga de im√°genes...');

        // Click en √°rea de upload
        uploadBox.addEventListener('click', (e) => {
            if (!e.target.closest('.remove-image-btn') && !e.target.closest('.image-preview-container')) {
                fileInput.click();
            }
        });

        // Drag and drop
        uploadBox.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadBox.style.borderColor = 'var(--color-primary)';
            uploadBox.style.background = 'rgba(61, 177, 3, 0.1)';
        });

        uploadBox.addEventListener('dragleave', (e) => {
            e.preventDefault();
            uploadBox.style.borderColor = '#e5e7eb';
            uploadBox.style.background = '#fafafa';
        });

        uploadBox.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadBox.style.borderColor = '#e5e7eb';
            uploadBox.style.background = '#fafafa';
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleImageUpload(files[0]);
            }
        });

        // Cambio en input file
        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                handleImageUpload(file);
            }
        });

        // Remover imagen
        if (removeImageBtn) {
            removeImageBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                clearImagePreview();
            });
        }

        // Manejar carga de imagen
        function handleImageUpload(file) {
            console.log('üì§ Procesando imagen:', file.name);

            if (!file.type.match('image/png')) {
                alert('‚ùå Solo se permiten archivos PNG.');
                return;
            }
            
            if (file.size > CONFIG.MAX_IMAGE_SIZE) {
                alert('‚ùå La imagen es demasiado grande. M√°ximo 2MB.');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = (e) => {
                if (imagePreview && imagePreviewContainer) {
                    imagePreview.src = e.target.result;
                    imagePreviewContainer.style.display = 'flex';
                    console.log('‚úÖ Imagen cargada correctamente');
                }
            };
            reader.readAsDataURL(file);
        }

        console.log('‚úÖ Carga de im√°genes inicializada');
    }

    // ========================================================================
    // M√ìDULO: TOGGLE TIPO DE IMAGEN (ICONO vs PNG)
    // ========================================================================
    
    function initImageTypeToggle() {
        const radioIcon = document.getElementById('radioIcon');
        const radioImage = document.getElementById('radioImage');
        const iconSection = document.getElementById('iconSection');
        const imageSection = document.getElementById('imageSection');

        if (!radioIcon || !radioImage || !iconSection || !imageSection) {
            console.log('‚ÑπÔ∏è Toggle de tipo de imagen no disponible');
            return;
        }

        console.log('üîÑ Inicializando toggle de tipo de imagen...');

        function toggleSections() {
            if (radioIcon.checked) {
                iconSection.style.display = 'block';
                imageSection.style.display = 'none';
            } else if (radioImage.checked) {
                iconSection.style.display = 'none';
                imageSection.style.display = 'block';
            }
        }

        radioIcon.addEventListener('change', toggleSections);
        radioImage.addEventListener('change', toggleSections);

        toggleSections();

        console.log('‚úÖ Toggle de tipo de imagen inicializado');
    }

    // ========================================================================
    // UTILIDADES
    // ========================================================================
    
    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    function clearImagePreview() {
        console.log('üóëÔ∏è Limpiando preview de imagen...');
        const fileInput = document.getElementById('solutionImage');
        const imagePreview = document.getElementById('imagePreview');
        const imagePreviewContainer = document.getElementById('imagePreviewContainer');
        
        if (fileInput) fileInput.value = '';
        if (imagePreview) imagePreview.src = '';
        if (imagePreviewContainer) imagePreviewContainer.style.display = 'none';
    }

    // Exponer funciones globales necesarias
    window.clearImagePreview = clearImagePreview;

    // ========================================================================
    // INICIAR APLICACI√ìN
    // ========================================================================
    
    init();

})();

// ============================================================================
// M√ìDULOS INDEPENDIENTES (FUERA DEL SCOPE PRINCIPAL)
// ============================================================================

/**
 * M√ìDULO: B√öSQUEDA Y FILTROS
 */
(function() {
    'use strict';

    document.addEventListener('DOMContentLoaded', () => {
        const searchInput = document.getElementById('search-solutions');
        const filterButtons = document.querySelectorAll('.filter-btn');
        const cards = document.querySelectorAll('.info-card');
        const noResults = document.querySelector('.no-results');

        if (!searchInput || !filterButtons.length || !cards.length) {
            console.log('‚ÑπÔ∏è B√∫squeda y filtros no disponibles');
            return;
        }

        console.log('üîç Inicializando b√∫squeda y filtros...');

        let currentFilter = 'all';

        filterButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                filterButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentFilter = btn.getAttribute('data-filter');
                filterCards();
            });
        });

        searchInput.addEventListener('input', () => {
            filterCards();
        });

        function filterCards() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            let visibleCount = 0;

            cards.forEach(card => {
                const category = card.getAttribute('data-category');
                const title = card.querySelector('h3')?.textContent.toLowerCase() || '';
                const description = card.querySelector('.card-description')?.textContent.toLowerCase() || '';

                const matchesFilter = currentFilter === 'all' || category === currentFilter;
                const matchesSearch = !searchTerm || 
                                    title.includes(searchTerm) || 
                                    description.includes(searchTerm);

                if (matchesFilter && matchesSearch) {
                    card.style.display = 'block';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });

            if (noResults) {
                noResults.style.display = visibleCount === 0 ? 'flex' : 'none';
            }
        }

        console.log('‚úÖ B√∫squeda y filtros inicializados');
    });

})();

/**
 * M√ìDULO: BOTONES DE ACCI√ìN DE TARJETAS
 */
(function() {
    'use strict';

    document.addEventListener('DOMContentLoaded', () => {
        console.log('üîó Inicializando botones de tarjetas...');
        
        document.querySelectorAll('.card-link-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.stopPropagation();
                const url = this.getAttribute('data-url');
                if (url) window.open(url, '_blank');
            });
        });

        console.log('‚úÖ Botones de tarjetas inicializados');
    });

})();

/**
 * M√ìDULO: MEN√ö M√ìVIL
 */
(function() {
    'use strict';

    const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
    const mobileMenu = document.querySelector('.mobile-menu');

    if (mobileMenuToggle && mobileMenu) {
        console.log('üì± Inicializando men√∫ m√≥vil...');
        
        mobileMenuToggle.addEventListener('click', () => {
            mobileMenu.classList.toggle('active');
            mobileMenuToggle.setAttribute(
                'aria-expanded',
                mobileMenu.classList.contains('active')
            );
        });

        console.log('‚úÖ Men√∫ m√≥vil inicializado');
    }

})();

/**
 * M√ìDULO: SCROLL TO TOP
 */
(function() {
    'use strict';

    const scrollToTopBtn = document.querySelector('.scroll-to-top');

    if (scrollToTopBtn) {
        console.log('‚¨ÜÔ∏è Inicializando bot√≥n scroll to top...');
        
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                scrollToTopBtn.classList.add('visible');
            } else {
                scrollToTopBtn.classList.remove('visible');
            }
        });

        scrollToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        console.log('‚úÖ Bot√≥n scroll to top inicializado');
    }

})();

/**
 * M√ìDULO: CONTADOR ANIMADO
 */
(function() {
    'use strict';

    const trustNumbers = document.querySelectorAll('.trust-number');
    let hasAnimated = false;

    if (trustNumbers.length === 0) return;

    console.log('üî¢ Inicializando contadores animados...');

    function animateCounter(element) {
        const target = parseInt(element.getAttribute('data-count'));
        const duration = 2000;
        const increment = target / (duration / 16);
        let current = 0;

        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                element.textContent = target.toLocaleString();
                clearInterval(timer);
            } else {
                element.textContent = Math.floor(current).toLocaleString();
            }
        }, 16);
    }

    const observerOptions = {
        threshold: 0.5,
        rootMargin: '0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting && !hasAnimated) {
                hasAnimated = true;
                trustNumbers.forEach(number => {
                    animateCounter(number);
                });
            }
        });
    }, observerOptions);

    const trustSignals = document.querySelector('.trust-signals');
    if (trustSignals) {
        observer.observe(trustSignals);
    }

    console.log('‚úÖ Contadores animados inicializados');

})();

/**
 * M√ìDULO: DROPDOWN DE LOGIN M√ìVIL
 */
(function() {
    'use strict';

    document.addEventListener('DOMContentLoaded', function() {
        const mobileLoginTrigger = document.getElementById('mobileLoginTrigger');
        const mobileLoginDropdown = document.getElementById('mobileLoginDropdown');
        
        if (mobileLoginTrigger && mobileLoginDropdown) {
            console.log('üì± Inicializando dropdown de login m√≥vil...');
            
            mobileLoginTrigger.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                mobileLoginDropdown.classList.toggle('active');
                mobileLoginTrigger.classList.toggle('active');
            });
            
            document.addEventListener('click', function(e) {
                if (!mobileLoginTrigger.contains(e.target) && 
                    !mobileLoginDropdown.contains(e.target)) {
                    mobileLoginDropdown.classList.remove('active');
                    mobileLoginTrigger.classList.remove('active');
                }
            });
            
            mobileLoginDropdown.addEventListener('click', function(e) {
                e.stopPropagation();
            });
            
            console.log('‚úÖ Dropdown de login m√≥vil inicializado');
        }
    });

})();

/**
 * M√ìDULO: TOGGLE DE TIPO DE IMAGEN EN EDICI√ìN
 */
document.addEventListener("change", function (e) {
    if (e.target.name === "editImageType") {
        const form = e.target.closest("form");
        const iconSection = form.querySelector(".editIconSection");
        const imageSection = form.querySelector(".editImageSection");
        const iconInput = iconSection?.querySelector("input[type='text']");
        const imageInput = imageSection?.querySelector("input[type='file']");

        if (iconSection) iconSection.style.display = "none";
        if (imageSection) imageSection.style.display = "none";

        if (iconInput) iconInput.value = "";
        if (imageInput) imageInput.value = "";

        if (e.target.value === "icon" && iconSection) iconSection.style.display = "flex";
        if (e.target.value === "image" && imageSection) imageSection.style.display = "flex";
    }
});

/**
 * M√ìDULO: LOGIN
 */
(function() {
    'use strict';

    console.log('üîê Inicializando m√≥dulo de login...');

    const CONFIG = {
        SCROLL_DURATION: 500
    };

    function init() {
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initLoginModules);
        } else {
            initLoginModules();
        }
    }

    function initLoginModules() {
        initLoginTriggerButton();
        initLoginDropdownClose();
        initFooterLoginLink();
        
        console.log('‚úÖ M√≥dulo de login completamente inicializado');
    }

    function initLoginTriggerButton() {
        const loginTrigger = document.getElementById('loginTrigger');
        const loginDropdown = document.getElementById('loginDropdown');
        
        if (!loginTrigger || !loginDropdown) {
            console.log('‚ÑπÔ∏è Bot√≥n de login no disponible');
            return;
        }
        
        console.log('üîò Inicializando bot√≥n de login del header...');
        
        loginTrigger.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            const isActive = loginDropdown.classList.toggle('active');
            loginTrigger.classList.toggle('active');
            loginTrigger.setAttribute('aria-expanded', isActive);
        });
        
        document.addEventListener('click', function(e) {
            if (!loginDropdown.contains(e.target) && !loginTrigger.contains(e.target)) {
                if (loginDropdown.classList.contains('active')) {
                    closeDropdown(loginTrigger, loginDropdown);
                }
            }
        });
        
        loginDropdown.addEventListener('click', function(e) {
            e.stopPropagation();
        });
        
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && loginDropdown.classList.contains('active')) {
                closeDropdown(loginTrigger, loginDropdown);
            }
        });
        
        console.log('‚úÖ Bot√≥n de login del header inicializado');
    }

    function initLoginDropdownClose() {
        const closeBtn = document.querySelector('.close-dropdown');
        const loginDropdown = document.getElementById('loginDropdown');
        const loginTrigger = document.getElementById('loginTrigger');

        if (!closeBtn || !loginDropdown || !loginTrigger) {
            console.log('‚ÑπÔ∏è Bot√≥n de cerrar dropdown no disponible');
            return;
        }

        console.log('‚ùå Inicializando bot√≥n de cerrar dropdown...');

        closeBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            closeDropdown(loginTrigger, loginDropdown);
        });

        console.log('‚úÖ Bot√≥n de cerrar dropdown inicializado');
    }

    function initFooterLoginLink() {
        const footerLoginLink = document.getElementById('footerLoginLink');
        const loginTrigger = document.getElementById('loginTrigger');
        const loginDropdown = document.getElementById('loginDropdown');
        
        if (!footerLoginLink || !loginTrigger || !loginDropdown) {
            console.log('‚ÑπÔ∏è Enlace del footer no disponible');
            return;
        }
        
        console.log('üîó Conectando enlace del footer...');
        
        footerLoginLink.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
            
            setTimeout(function() {
                openDropdown(loginTrigger, loginDropdown);
                
                const usernameInput = document.getElementById('username');
                if (usernameInput) {
                    usernameInput.focus();
                }
            }, CONFIG.SCROLL_DURATION);
        });
        
        console.log('‚úÖ Enlace del footer configurado');
    }

    function openDropdown(trigger, dropdown) {
        dropdown.classList.add('active');
        trigger.classList.add('active');
        trigger.setAttribute('aria-expanded', 'true');
    }

    function closeDropdown(trigger, dropdown) {
        dropdown.classList.remove('active');
        trigger.classList.remove('active');
        trigger.setAttribute('aria-expanded', 'false');
    }

    init();

})();

/**
 * M√ìDULO: ACCESIBILIDAD
 */
window.addEventListener('load', function() {
    const images = document.querySelectorAll('img:not([width]):not([height])');
    images.forEach(img => {
        if (img.naturalWidth && img.naturalHeight) {
            img.setAttribute('width', img.naturalWidth);
            img.setAttribute('height', img.naturalHeight);
        }
    });
});

/**
 * ============================================================================
 * SISTEMA DE MODALES - VERSI√ìN SIMPLIFICADA Y FUNCIONAL
 * ============================================================================
 */

(function() {
    'use strict';

    console.log('üöÄ Iniciando sistema de modales...');

    /**
     * Cerrar todos los modales al cargar la p√°gina
     */
    function closeAllModalsOnLoad() {
        console.log('üîí Cerrando modales al cargar...');
        
        // Modales de Bootstrap
        document.querySelectorAll('.modal').forEach(modal => {
            modal.classList.remove('show');
            modal.style.display = 'none';
            modal.setAttribute('aria-hidden', 'true');
        });
        
        // Modales personalizados
        document.querySelectorAll('.modal-overlay-evento').forEach(modal => {
            modal.style.display = 'none';
            modal.classList.remove('show');
        });
        
        // Limpiar backdrops
        document.querySelectorAll('.modal-backdrop').forEach(backdrop => backdrop.remove());
        
        // Restaurar body
        document.body.classList.remove('modal-open');
        document.body.style.overflow = '';
        document.body.style.paddingRight = '';
        
        console.log('‚úÖ Modales cerrados');
    }

    /**
     * Inicializar modales de ELIMINAR (Bootstrap)
     */
    function initDeleteModals() {
        console.log('üóëÔ∏è Inicializando modales de eliminar...');
        
        // Esperar a que Bootstrap est√© disponible
        if (typeof bootstrap === 'undefined') {
            console.warn('‚ö†Ô∏è Bootstrap no disponible, reintentando...');
            setTimeout(initDeleteModals, 100);
            return;
        }
        
        const deleteButtons = document.querySelectorAll('.btn-eliminar');
        console.log(`   Encontrados ${deleteButtons.length} botones de eliminar`);
        
        deleteButtons.forEach(button => {
            const targetId = button.getAttribute('data-bs-target');
            
            if (!targetId) {
                console.warn('‚ö†Ô∏è Bot√≥n sin data-bs-target');
                return;
            }
            
            const modal = document.querySelector(targetId);
            
            if (!modal) {
                console.warn(`‚ö†Ô∏è Modal no encontrado: ${targetId}`);
                return;
            }
            
            button.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                console.log(`üñ±Ô∏è Click en eliminar ‚Üí ${targetId}`);
                
                try {
                    const bsModal = new bootstrap.Modal(modal, {
                        backdrop: true,
                        keyboard: true,
                        focus: true
                    });
                    bsModal.show();
                    console.log('‚úÖ Modal de eliminar abierto');
                } catch (error) {
                    console.error('‚ùå Error:', error);
                }
            });
        });
        
        console.log('‚úÖ Modales de eliminar configurados');
    }

    /**
     * Inicializar modales de EDITAR (personalizados)
     */
    function initEditModals() {
        console.log('‚úèÔ∏è Inicializando modales de editar...');
        
        const editButtons = document.querySelectorAll('.btn-editar');
        console.log(`   Encontrados ${editButtons.length} botones de editar`);
        
        editButtons.forEach(button => {
            const targetId = button.getAttribute('data-bs-target');
            
            if (!targetId) {
                console.warn('‚ö†Ô∏è Bot√≥n sin data-bs-target');
                return;
            }
            
            const modal = document.querySelector(targetId);
            
            if (!modal) {
                console.warn(`‚ö†Ô∏è Modal no encontrado: ${targetId}`);
                return;
            }
            
            button.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                console.log(`üñ±Ô∏è Click en editar ‚Üí ${targetId}`);
                
                modal.style.display = 'flex';
                modal.classList.add('show');
                document.body.style.overflow = 'hidden';
                
                console.log('‚úÖ Modal de editar abierto');
            });
        });
        
        // Botones de cerrar
        document.querySelectorAll('.modal-cerrar-evento').forEach(closeBtn => {
            closeBtn.addEventListener('click', function(e) {
                e.preventDefault();
                const modal = this.closest('.modal-overlay-evento');
                if (modal) {
                    modal.style.display = 'none';
                    modal.classList.remove('show');
                    document.body.style.overflow = '';
                    console.log('üö™ Modal de editar cerrado');
                }
            });
        });
        
        // Click en overlay
        document.querySelectorAll('.modal-overlay-evento').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.style.display = 'none';
                    this.classList.remove('show');
                    document.body.style.overflow = '';
                    console.log('üö™ Modal cerrado por click en overlay');
                }
            });
        });
        
        // Tecla ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const openModal = document.querySelector('.modal-overlay-evento.show');
                if (openModal) {
                    openModal.style.display = 'none';
                    openModal.classList.remove('show');
                    document.body.style.overflow = '';
                    console.log('üö™ Modal cerrado con ESC');
                }
            }
        });
        
        console.log('‚úÖ Modales de editar configurados');
    }

    /**
     * Inicializaci√≥n
     */
    function init() {
        closeAllModalsOnLoad();
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(() => {
                    initDeleteModals();
                    initEditModals();
                }, 200);
            });
        } else {
            setTimeout(() => {
                initDeleteModals();
                initEditModals();
            }, 200);
        }
    }

    init();
    
    console.log('‚úÖ Sistema de modales inicializado');

})();
/**
 * MENSAJE DE CONSOLA
 */
console.log('%c¬°Bienvenido a Gesti√≥n del Conocimiento!', 'color: #3db103; font-size: 24px; font-weight: bold;');
console.log('%cRepositorio de Soluciones Tecnol√≥gicas del SENA', 'color: #50e5f9; font-size: 14px;');
console.log('%cüí° ¬øInteresado en contribuir? Cont√°ctanos.', 'color: #666; font-size: 12px;');


/**
 * ============================================================
 * MODALES DE ELIMINAR - 100% JAVASCRIPT PERSONALIZADO
 * ============================================================
 */

(function() {
    'use strict';
    
    console.log('üóëÔ∏è Inicializando sistema de modales de eliminar...');
    
    function initDeleteModals() {
        // Encontrar TODOS los botones de eliminar
        const deleteButtons = document.querySelectorAll('.btn-eliminar[data-modal-target]');
        
        console.log(`   Encontrados ${deleteButtons.length} botones de eliminar`);
        
        if (deleteButtons.length === 0) {
            console.warn('‚ö†Ô∏è No se encontraron botones de eliminar');
            return;
        }
        
        // Agregar evento click a cada bot√≥n
        deleteButtons.forEach(function(button) {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                // Obtener el ID del modal
                const modalId = this.getAttribute('data-modal-target');
                
                if (!modalId) {
                    console.error('‚ùå Bot√≥n sin data-modal-target');
                    return;
                }
                
                console.log(`üñ±Ô∏è Click en eliminar ‚Üí ${modalId}`);
                
                // Buscar el modal
                const modal = document.getElementById(modalId);
                
                if (!modal) {
                    console.error(`‚ùå Modal no encontrado: ${modalId}`);
                    return;
                }
                
                // Abrir el modal
                openDeleteModal(modal);
            });
        });
        
        // Configurar botones de cerrar en todos los modales
        setupCloseButtons();
        
        // Cerrar con click en overlay
        setupOverlayClose();
        
        // Cerrar con tecla ESC
        setupEscapeKey();
        
        console.log('‚úÖ Sistema de modales de eliminar configurado');
    }
    
    function openDeleteModal(modal) {
        console.log('üîì Abriendo modal de eliminar');
        
        // Agregar clase active
        modal.classList.add('active');
        
        // Bloquear scroll del body
        document.body.style.overflow = 'hidden';
        
        console.log('‚úÖ Modal abierto');
    }
    
    function closeDeleteModal(modal) {
        console.log('üîí Cerrando modal de eliminar');
        
        // Quitar clase active
        modal.classList.remove('active');
        
        // Restaurar scroll del body
        document.body.style.overflow = '';
        
        console.log('‚úÖ Modal cerrado');
    }
    
    function setupCloseButtons() {
        // Botones con clase .modal-delete-close
        const closeButtons = document.querySelectorAll('.modal-delete-close, .btn-close');
        
        closeButtons.forEach(function(button) {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Encontrar el modal padre
                const modal = this.closest('.modal-delete-overlay');
                
                if (modal) {
                    closeDeleteModal(modal);
                }
            });
        });
        
        // Botones "Cancelar" en el footer
        const cancelButtons = document.querySelectorAll('.modal-delete-footer .btn');
        
        cancelButtons.forEach(function(button) {
            // Solo si no es el bot√≥n de eliminar
            if (!button.classList.contains('btn-eliminar')) {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const modal = this.closest('.modal-delete-overlay');
                    
                    if (modal) {
                        closeDeleteModal(modal);
                    }
                });
            }
        });
    }
    
    function setupOverlayClose() {
        const modals = document.querySelectorAll('.modal-delete-overlay');
        
        modals.forEach(function(modal) {
            modal.addEventListener('click', function(e) {
                // Solo cerrar si se hace click directamente en el overlay
                // No si se hace click en el contenido
                if (e.target === modal) {
                    closeDeleteModal(modal);
                }
            });
        });
    }
    
    function setupEscapeKey() {
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                // Buscar si hay alg√∫n modal abierto
                const openModal = document.querySelector('.modal-delete-overlay.active');
                
                if (openModal) {
                    closeDeleteModal(openModal);
                }
            }
        });
    }
    
    // Inicializar cuando el DOM est√© listo
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initDeleteModals);
    } else {
        initDeleteModals();
    }
    
})();

</script>
</body>
</html>